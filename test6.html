<!DOCTYPE html>
<html>

<head>
    <title>AMP 360 Story</title>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
</head>

<body>
    <amp-story standalone>
        <amp-story-page id="page-1">
            <amp-360 src="fengshui.jpg" rotation="0deg" scene-id="scene-1">
                <amp-story-360 section="scene-1" scene-heading="0deg"></amp-story-360>
            </amp-360>
        </amp-story-page>
    </amp-story>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientationabsolute', handleOrientation, true);
            }
        });

        function handleOrientation(event) {
            const compassDirection = event.alpha;

            const ampStory360 = document.querySelector('amp-story-360');
            ampStory360.setAttribute('scene-heading', compassDirection + 'deg');
        }
    </script>
</body>

</html>