<!DOCTYPE html>
<html âš¡>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <link rel="canonical" href="/hello-world.html">
    <title>AMP Example</title>
    <style amp-custom>
        /* Your custom styles here */
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>
    <script async custom-element="amp-script" src="https://cdn.ampproject.org/v0/amp-script-0.1.js"></script>
</head>

<body>

    <!-- Button to trigger the function -->
    <button on="tap:AMP.setState({startOrientation: true})">Start Orientation</button>

    <!-- amp-script component -->
    <amp-script layout="container" script="orientation-script" nodom></amp-script>

    <!-- Hidden template to hold the script -->
    <template type="amp-mustache" id="orientation-script-template">
        <script id="orientation-script" type="text/plain" target="amp-script">
    function startOrientationHandling() {
      window.addEventListener("deviceorientationabsolute", handleOrientation, true);
    }

    function handleOrientation(event) {
      const compassDirection = event.alpha;
      console.log("wombats", compassDirection);

      if (compassDirection > 337 || compassDirection <= 22) {
        window.open("https://bcebel.github.io/3d/home.html#page=six");
      } else if (compassDirection > 22 && compassDirection <= 67) {
        window.open("https://bcebel.github.io/3d/home.html#page=five");
      } else if (compassDirection > 67 && compassDirection <= 112) {
        window.open("https://bcebel.github.io/3d/home.html#page=four");
      } else if (compassDirection > 112 && compassDirection <= 157) {
        window.open("https://bcebel.github.io/3d/home.html#page=three");
      } else if (compassDirection > 157 && compassDirection <= 202) {
        window.open("https://bcebel.github.io/3d/home.html#page=two");
      } else if (compassDirection > 202 && compassDirection <= 247) {
        window.open("https://bcebel.github.io/3d/home.html#page=one");
      } else if (compassDirection > 247 && compassDirection <= 292) {
        window.open("https://bcebel.github.io/3d/home.html#page=eight");
      } else if (compassDirection > 292 && compassDirection <= 337) {
        window.open("https://bcebel.github.io/3d/home.html#page=seven");
      }
    }

    if (AMP.getState().startOrientation) {
      startOrientationHandling();
    }
  </script>
    </template>

    <script>
        (function () {
            // Initialize amp-bind state
            AMP.setState({ startOrientation: false });

            // Insert script content into amp-script tag dynamically
            const template = document.getElementById('orientation-script-template');
            const scriptContent = template.innerHTML;
            const ampScriptTag = document.querySelector('amp-script');
            ampScriptTag.innerHTML = scriptContent;
        })();
    </script>

</body>

</html>